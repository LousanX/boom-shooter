require=function e(t,o,n){function c(a,s){if(!o[a]){if(!t[a]){var r="function"==typeof require&&require;if(!s&&r)return r(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){var o=t[a][1][e];return c(o||e)},d,d.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)c(n[a]);return c}({BtnControl:[function(e,t,o){"use strict";cc._RF.push(t,"dbf6a6IFcZD54M+hOeFhRuI","BtnControl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.preloadScene("game")},start:function(){},ModelChose:function(e,t){switch(t){case"easy":cc.find("Game").getComponent("game")._model=5;break;case"norml":cc.find("Game").getComponent("game")._model=10;break;case"hard":cc.find("Game").getComponent("game")._model=30;break;case"special":cc.find("Game").getComponent("game")._model=100}cc.director.loadScene("game")}}),cc._RF.pop()},{}],GameCtl:[function(e,t,o){"use strict";cc._RF.push(t,"4f75ctQWt1CDpwmQtBSC5ou","GameCtl");var n=e("GameModel");cc.Class({extends:cc.Component,properties:{tan1:cc.AudioClip,tan2:cc.AudioClip,crack1:cc.AudioClip,crack2:cc.AudioClip,restartBtn:cc.Node,beginBtn:cc.Node,backtBtn:cc.Node,pauseBtn:cc.Node,ballnumber:0,hero:e("hero"),brickLayout:e("brickLayer"),gameView:e("GameView"),bg:e("bg"),overLayer:e("overGame")},onLoad:function(){var e=this;cc.director.preloadScene("chose"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode===cc.KEY.back&&("game"==cc.director.getScene().name?cc.director.loadScene("chose"):cc.game.end())}),this.physicsManager=cc.director.getPhysicsManager(),this.gameModel=new n,this.startGame(),this.gameCtl=cc.find("Canvas").getComponent("GameCtl"),this.restartBtn.on("touchend",function(t){e.gameCtl.init()}),this.beginBtn.on("touchend",function(t){e.resumeGame()}),this.backtBtn.on("touchend",function(e){cc.director.loadScene("chose")}),this.pauseBtn.on("touchend",function(t){e.pauseGame()})},init:function(){this.gameModel.init(),this.physicsManager.enabled=!0,this.hero.init(),this.brickLayout.init(this.gameModel.bricksNumber),this.gameView.init(this),this.bg.init(),this.ballnumber=cc.find("Canvas/hero").getComponent("hero")._ball,this.overLayer.init()},startGame:function(){this.init()},pauseGame:function(){this.overLayer.node.active=!0,this.physicsManager.enabled=!1,this.overLayer.node.getChildByName("score").getComponent(cc.Label).string="当前得分："+cc.find("Canvas/top/topScore").getComponent(cc.Label).string,this.overLayer.node.getChildByName("score").getChildByName("result").active=!1},resumeGame:function(){this.overLayer.node.active=!1,this.physicsManager.enabled=!0},stopGame:function(){this.physicsManager.enabled=!1,this.overLayer.node.active=!0,this.overLayer.node.getChildByName("score").getChildByName("result").active=!0},onBallContactBrick:function(e,t){cc.audioEngine.play(this.tan2),0==--e.getChildByName("number").getComponent(cc.Label).string&&(e.destroy(),this.ballnumber--,cc.audioEngine.play(this.crack2)),this.gameModel.addScore(1),--t.getChildByName("number").getComponent(cc.Label).string<=0&&(t.parent=null,cc.audioEngine.play(this.crack1)),this.gameView.updateScore(this.gameModel.score),this.gameModel.bricksNumber<=0&&(this.overLayer.win(),this.stopGame()),0==this.ballnumber&&(this.overLayer.lose(),this.stopGame())},onBallContactGround:function(e,t){cc.audioEngine.play(this.tan1),0==--e.getChildByName("number").getComponent(cc.Label).string&&(e.destroy(),this.ballnumber--,cc.audioEngine.play(this.crack2)),0==this.ballnumber&&(this.overLayer.lose(),this.stopGame())},onBallContactPaddle:function(e,t){cc.audioEngine.play(this.tan2)},onBallContactWall:function(e,t){cc.audioEngine.play(this.tan1),0==--e.getChildByName("number").getComponent(cc.Label).string&&(e.destroy(),this.ballnumber--,cc.audioEngine.play(this.crack2)),0==this.ballnumber&&(this.overLayer.lose(),this.stopGame())},onDestroy:function(){this.physicsManager.enabled=!1},update:function(e){cc.find("Canvas/ballLabel").getComponent(cc.Label).string=this.hero.ballNodePool.size()}}),cc._RF.pop()},{GameModel:"GameModel",GameView:"GameView",bg:"bg",brickLayer:"brickLayer",hero:"hero",overGame:"overGame"}],GameModel:[function(e,t,o){"use strict";cc._RF.push(t,"d3d41nza4xDubTyfOH6cZM1","GameModel"),cc.Class({extends:cc.Component,properties:{score:0,bricksNumber:0},init:function(){this.score=0,this.bricksNumber=50},addScore:function(e){this.score+=e}}),cc._RF.pop()},{}],GameView:[function(e,t,o){"use strict";cc._RF.push(t,"2be49qGvu9Ar6UbnEYScUIT","GameView"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label},init:function(e){this.gameCtl=e,this.scoreLabel.string="0"},updateScore:function(e){this.scoreLabel.string=e}}),cc._RF.pop()},{}],NumberCtl:[function(e,t,o){"use strict";cc._RF.push(t,"7ece2YPpzdIOoGC3nw+8nrv","NumberCtl"),cc.Class({extends:cc.Component,properties:{},init:function(e,t){var o=cc.random0To1()*t,n=o-o%1;e.string=n}}),cc._RF.pop()},{}],ball:[function(e,t,o){"use strict";cc._RF.push(t,"b4bf7QPdX1In73KHqPLcp+s","ball");var n=e("colorCtl");e("NumberCtl");cc.Class({extends:cc.Component,properties:{},init:function(e){var t=0;5==cc.find("Game").getComponent("game")._model&&(t=100),10==cc.find("Game").getComponent("game")._model&&(t=50),30==cc.find("Game").getComponent("game")._model&&(t=20),100==cc.find("Game").getComponent("game")._model&&(t=999),this.gameCtl=e;var o=this.node.getChildByName("number"),c=cc.find("totleCtl").getComponent("totle"),i=cc.find("Canvas/hero").getComponent("hero"),a=(c.zongshu+t)/i._ball;o.getComponent(cc.Label).string=a-a%1,this.node.position=cc.v2(0,-100);var s=1e3*cc.random0To1();this.getComponent(cc.RigidBody).linearVelocity=cc.v2(s,800),(new n).init(this.node)},onBeginContact:function(e,t,o){switch(o.tag){case 1:this.gameCtl.onBallContactBrick(t.node,o.node);break;case 2:this.gameCtl.onBallContactGround(t.node,o.node);break;case 3:this.gameCtl.onBallContactPaddle(t.node,o.node);break;case 4:this.gameCtl.onBallContactWall(t.node,o.node)}},onPreSolve:function(e,t,o){switch(o.tag){case 0:e.disabledOnce=!0}}}),cc._RF.pop()},{NumberCtl:"NumberCtl",colorCtl:"colorCtl"}],bg:[function(e,t,o){"use strict";cc._RF.push(t,"0b8c9zVNsBHCYb/S0tl8nKu","bg");var n=e("colorCtl");cc.Class({extends:cc.Component,properties:{},init:function(){(new n).init(this.node)}}),cc._RF.pop()},{colorCtl:"colorCtl"}],boom:[function(e,t,o){"use strict";cc._RF.push(t,"d4344v6J3NFV4EjQ5DsBzg5","boom"),cc.Class({extends:cc.Component,properties:{suipian:cc.Prefab},boomBrick:function(e){for(var t=e.position,o=[],n=(cc.fadeOut(.5),cc.easeBezierAction(20,25,50,10,100,-150),cc.easeBezierAction(.17,.67,.79,1.47),0);n<4;n++){var c=10*cc.random0To1();o.push(c+1)}for(var i=0;i<4;i++){var a=cc.instantiate(this.suipian);cc.find("Canvas/PhysicsLayer/brickLayer").addChild(a);var s=a.getChildByName("ctx").getComponent(cc.Graphics);s.moveTo(0,0),s.bezierCurveTo(20,25,50,10,100,-150),s.stroke(),a.position=t}},boomBall:function(e){}}),cc._RF.pop()},{}],brickLayer:[function(e,t,o){"use strict";cc._RF.push(t,"e57edk56cZGuLdo4BSiAwW+","brickLayer");var n=e("colorCtl"),c=e("NumberCtl");cc.Class({extends:cc.Component,properties:{padding:0,spacing:0,cols:0,brickPrefab:cc.Prefab,bricksNumber:0},init:function(e){this.node.removeAllChildren(),this.bricksNumber=e;for(var t=0;t<this.bricksNumber;t++){var o=cc.instantiate(this.brickPrefab),i=o.getChildByName("number"),a=new c,s=cc.find("Game").getComponent("game")._model;a.init(i.getComponent(cc.Label),s),0==i.getComponent(cc.Label).string&&(i.getComponent(cc.Label).string=1),cc.find("totleCtl").getComponent("totle").plus(i.getComponent(cc.Label).string);var r=new n;r.init(o),r.init(i),o.parent=this.node,o.x=this.padding+t%this.cols*(o.width+this.spacing)+o.width/2,o.y=-this.padding-Math.floor(t/this.cols)*(o.height+this.spacing)-o.height/2}}}),cc._RF.pop()},{NumberCtl:"NumberCtl",colorCtl:"colorCtl"}],colorCtl:[function(e,t,o){"use strict";cc._RF.push(t,"94755kyeZZMDoDmRZyPR6Cx","colorCtl"),cc.Class({extends:cc.Component,properties:{},init:function(e){var t=140*cc.random0To1(),o=140*cc.random0To1(),n=140*cc.random0To1(),c=t-t%1,i=o-o%1,a=n-n%1,s=new cc.Color;s.setB(a+100),s.setG(i+100),s.setR(c+100),e.color=s}}),cc._RF.pop()},{}],game:[function(e,t,o){"use strict";cc._RF.push(t,"dd0farZ49pOHIuutEFcRJPu","game"),cc.Class({extends:cc.Component,properties:{_model:0},onLoad:function(){cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],hero:[function(e,t,o){"use strict";cc._RF.push(t,"cefb6L1vg1GW4tZ0yqYEjvP","hero");var n=e("colorCtl");cc.Class({extends:cc.Component,properties:{_Shooting:!1,_lineShoot:!1,_ball:0,ballPrefab:cc.Prefab,putButton:cc.Node,lineBtn:cc.Node},init:function(){var e=this;this.node.x=0;var t=new n;t.init(this.node);var o=this.node.getChildByName("ear1"),c=this.node.getChildByName("ear2");t.init(o),t.init(c),this._ball=this.setBallNumber(),this.ballNodePool=new cc.NodePool,100==cc.find("Game").getComponent("game")._model&&(this._ball=99);for(var i=0;i<this._ball;i++)this.ballNodePool.put(cc.instantiate(this.ballPrefab));this.node.on("touchmove",function(t){var n=e.node.parent.convertToNodeSpaceAR(t.getLocation());e.node.x=n.x,o.x=-77.4,c.x=77.8}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){t.keyCode===cc.KEY.j&&(e._Shooting=!0),t.keyCode===cc.KEY.k&&(e._lineShoot=!0)}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(t){t.keyCode===cc.KEY.j&&(e._Shooting=!1),t.keyCode===cc.KEY.k&&(e._lineShoot=!1)}),this.putButton.on("touchend",function(t){e._Shooting=!0}),this.lineBtn.on("touchstart",function(t){e._lineShoot=!0}),this.lineBtn.on("touchend",function(t){e._lineShoot=!1})},setBallNumber:function(){var e=cc.random0To1();return e>0&&e<.33?2:e>=.33&&e<=.66?4:e>.66&&e<1?6:void 0},update:function(e){if(this._Shooting||this._lineShoot){var t=this;if(t.ballNodePool.size()>0){var o=t.ballNodePool.get();o.parent=cc.find("Canvas"),o.getComponent("ball").init(cc.find("Canvas").getComponent("GameCtl"))}}this._Shooting=!1}}),cc._RF.pop()},{colorCtl:"colorCtl"}],musicCtl:[function(e,t,o){"use strict";cc._RF.push(t,"e3dfemLsDxJMo6gPEmWrNXH","musicCtl"),cc.Class({extends:cc.Component,properties:{tan1:cc.AudioClip,tan2:cc.AudioClip,crack:cc.AudioClip},onLoad:function(){}}),cc._RF.pop()},{}],overGame:[function(e,t,o){"use strict";cc._RF.push(t,"c9b02xa0PFGabXLCSn+PD+Z","overGame"),cc.Class({extends:cc.Component,properties:{topScore:cc.Label},init:function(){this.node.active=!1},win:function(){this.node.getChildByName("score").getComponent(cc.Label).string="最终得分："+this.topScore.string,this.node.getChildByName("score").getChildByName("result").getComponent(cc.Label).string="You WIN!"},lose:function(){this.node.getChildByName("score").getComponent(cc.Label).string="最终得分："+this.topScore.string,this.node.getChildByName("score").getChildByName("result").getComponent(cc.Label).string="You Lose!"}}),cc._RF.pop()},{}],totle:[function(e,t,o){"use strict";cc._RF.push(t,"e6bc2Ub5M9Dd7GwGButEx09","totle"),cc.Class({extends:cc.Component,properties:{zongshu:0},onLoad:function(){cc.game.addPersistRootNode(this.ndoe)},plus:function(e){this.zongshu+=e}}),cc._RF.pop()},{}]},{},["BtnControl","GameCtl","GameModel","GameView","NumberCtl","ball","bg","boom","brickLayer","colorCtl","game","hero","musicCtl","overGame","totle"]);